{"ast":null,"code":"import _objectSpread from\"/Users/nickahlers/Desktop/WeatherReact-Express-MongoDB/stormbreaker-aws/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/nickahlers/Desktop/WeatherReact-Express-MongoDB/stormbreaker-aws/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Form,Button,Row,Col,Container}from'reactstrap';import{Control,Errors}from'react-redux-form';import DisplayWeather from'./DisplayWeather';import{Loading}from'./LoadingComponent';function WeatherData(){var _useState=useState({state:'',coordinates:'',touched:{state:false,coordinates:false}}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),passeddata=_useState4[0],setData=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var urls={state:\"https://api.weather.gov/alerts/active?status=actual&message_type=alert&area=\".concat(form.state,\"&urgency=Immediate,Expected&severity=Extreme,Severe&certainty=Observed,Likely\"),coordinates:\"https://api.weather.gov/alerts/active?status=actual&message_type=alert&point=\".concat(form.coordinates,\"&urgency=Immediate,Expected&severity=Extreme,Severe&certainty=Observed,Likely\")};var maxLength=function maxLength(len){return function(val){return!val||val.length<=len;};};var minLength=function minLength(len){return function(val){return val&&val.length>=len;};};var isNumber=function isNumber(val){return /[0-9]\\,./i.test(val);};var validAbbreviation=function validAbbreviation(val){return /^[A-Z]/i.test(val);};var handleResponse=function handleResponse(res){if(res.ok){return res.json();}setError(res.errorMessage);};function fetchData(e){e.preventDefault();var url=form.state?'state':'coordinates';fetch(urls[url]).then(handleResponse).then(function(json){return setData(json);}).catch(function(err){return setError(err.errorMessage);});}var goodData=passeddata==='object'&&passeddata.features&&[].isArray(passeddata.features);var handleChange=function handleChange(e){var name=e.target.name;var value=e.target.value;if(name===\"state\"){setForm(_objectSpread(_objectSpread({},form),{},{state:value}));}if(name===\"coordinates\"){setForm(_objectSpread(_objectSpread({},form),{},{coordinates:value}));}};return/*#__PURE__*/React.createElement(\"div\",{className:\"row text-center\"},/*#__PURE__*/React.createElement(\"h2\",{style:{marginTop:50,marginBottom:20}},\"Severe Weather Search\"),/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,{className:\"form-group\"},/*#__PURE__*/React.createElement(Col,{sm:{size:6,offset:3}},/*#__PURE__*/React.createElement(Control.text,{model:\".state\",id:\"state\",name:\"state\",placeholder:\"State abbreviation e.g. WA\",className:\"form-control\",onChange:function onChange(e){return handleChange(e);},validators:{validAbbreviation:validAbbreviation,minLength:minLength(2),maxLength:maxLength(2.5)}}),/*#__PURE__*/React.createElement(Errors,{className:\"error-text\",model:\".state\",show:\"touched\",component:\"div\",messages:{validAbbreviation:'Invalid state abbreviation! ',minLength:'Must be at least two characters!',maxLength:'Cannot exceed two characters!'}})),/*#__PURE__*/React.createElement(\"p\",{style:{marginTop:15,marginBottom:10}},\"or\"),/*#__PURE__*/React.createElement(Col,{sm:{size:8,offset:2}},/*#__PURE__*/React.createElement(Control.text,{model:\".coordinates\",id:\"coordinates\",name:\"coordinates\",placeholder:\"Latitude/longitude coordinates e.g. 47.8209,-122.3151 no spaces\",className:\"form-control\",onChange:function onChange(e){return handleChange(e);},validators:{isNumber:isNumber,maxLength:maxLength(13)}}),/*#__PURE__*/React.createElement(Errors,{className:\"error-text\",model:\".coordinates\",show:\"touched\",component:\"div\",messages:{isNumber:'US latitude/longitude coordinates only!'}})))),/*#__PURE__*/React.createElement(Button,{type:\"submit\",color:\"primary\",size:\"lg\",style:{marginTop:15,marginRight:5,marginBottom:50},onClick:function onClick(e){return fetchData(e);}},\"Search\"),/*#__PURE__*/React.createElement(Button,{type:\"submit\",color:\"danger\",size:\"lg\",style:{marginTop:15,marginBottom:50},href:\"/\"},\"Clear\"),/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:20}},passeddata&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(DisplayWeather,{data:passeddata}))),/*#__PURE__*/React.createElement(\"div\",null,error&&/*#__PURE__*/React.createElement(\"h1\",null,error))));}export default WeatherData;","map":{"version":3,"sources":["/Users/nickahlers/Desktop/WeatherReact-Express-MongoDB/stormbreaker-aws/client/src/components/WeatherDataComponent.js"],"names":["React","useEffect","useState","Form","Button","Row","Col","Container","Control","Errors","DisplayWeather","Loading","WeatherData","state","coordinates","touched","form","setForm","passeddata","setData","error","setError","urls","maxLength","len","val","length","minLength","isNumber","test","validAbbreviation","handleResponse","res","ok","json","errorMessage","fetchData","e","preventDefault","url","fetch","then","catch","err","goodData","features","isArray","handleChange","name","target","value","marginTop","marginBottom","size","offset","marginRight"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Form, Button, Row, Col, Container } from 'reactstrap';\nimport { Control, Errors } from 'react-redux-form';\nimport DisplayWeather from './DisplayWeather';\nimport { Loading } from './LoadingComponent';\n\n\nfunction WeatherData() {\n\n  const [form, setForm] = useState({\n    state: '',\n    coordinates: '',\n    touched: {\n      state: false,\n      coordinates: false\n    }\n  });\n\n  const [passeddata, setData] = useState(null)\n  const [error, setError] = useState(null)\n\n  const urls = {\n    state:`https://api.weather.gov/alerts/active?status=actual&message_type=alert&area=${form.state}&urgency=Immediate,Expected&severity=Extreme,Severe&certainty=Observed,Likely`,\n    coordinates:`https://api.weather.gov/alerts/active?status=actual&message_type=alert&point=${form.coordinates}&urgency=Immediate,Expected&severity=Extreme,Severe&certainty=Observed,Likely`\n  }\n\n  const maxLength = len => val => !val || (val.length <= len);\n  const minLength = len => val => val && (val.length >= len);\n  const isNumber = val => /[0-9]\\,./i.test(val);\n  const validAbbreviation = val => /^[A-Z]/i.test(val);\n\n\n  const handleResponse = res => {\n    if(res.ok) {\n      return res.json()\n    }\n    setError(res.errorMessage)\n  }\n\n  function fetchData(e) {\n      e.preventDefault();\n\n      const url = form.state ? 'state' : 'coordinates'\n\n      fetch(urls[url])\n        .then(handleResponse)\n        .then(json => setData(json))\n        .catch(err => setError(err.errorMessage))\n      \n  }\n\n  const goodData = passeddata === 'object' && passeddata.features && [].isArray(passeddata.features)\n  \n  const handleChange = (e) => {\n    let name = e.target.name;\n    let value = e.target.value;\n\n    if (name === \"state\") {\n      setForm({ ...form, state: value });\n    }\n    if (name === \"coordinates\") {\n      setForm({ ...form, coordinates: value });\n    }\n  };\n\n  return (\n    <div className=\"row text-center\">\n      <h2 style={{ marginTop: 50, marginBottom: 20 }}>Severe Weather Search</h2>\n      <Form>\n        <Container>\n          <Row className=\"form-group\">\n            <Col sm={{ size: 6, offset: 3 }}>\n              <Control.text model=\".state\" id=\"state\" name=\"state\"\n                placeholder=\"State abbreviation e.g. WA\"\n                className=\"form-control\"\n                onChange={(e) => handleChange(e)}\n                validators={{\n                  validAbbreviation,\n                  minLength: minLength(2),\n                  maxLength: maxLength(2.5)\n                }}\n              />\n              <Errors\n                className=\"error-text\"\n                model=\".state\"\n                show=\"touched\"\n                component=\"div\"\n                messages={{\n                  validAbbreviation: 'Invalid state abbreviation! ',\n                  minLength: 'Must be at least two characters!',\n                  maxLength: 'Cannot exceed two characters!'\n                }}\n              />\n            </Col>\n            <p style={{ marginTop: 15, marginBottom: 10 }}>or</p>\n            <Col sm={{ size: 8, offset: 2 }}>\n              <Control.text model=\".coordinates\" id=\"coordinates\"\n                name=\"coordinates\"\n                placeholder=\"Latitude/longitude coordinates e.g. 47.8209,-122.3151 no spaces\"\n                className=\"form-control\"\n                onChange={(e) => handleChange(e)}\n                validators={{\n                  isNumber,\n                  maxLength: maxLength(13)\n                }}\n              />\n              <Errors\n                className=\"error-text\"\n                model=\".coordinates\"\n                show=\"touched\"\n                component=\"div\"\n                messages={{\n                  isNumber: 'US latitude/longitude coordinates only!'\n                }}\n              />\n            </Col>\n          </Row>\n        </Container>\n        <Button type=\"submit\" color=\"primary\" size=\"lg\" style={{ marginTop: 15, marginRight: 5, marginBottom: 50 }} onClick={(e) => fetchData(e)}>Search</Button>\n        <Button type=\"submit\" color=\"danger\" size=\"lg\" style={{ marginTop: 15, marginBottom: 50 }} href=\"/\">Clear</Button>\n        <div style={{ marginTop: 20 }}>\n          {passeddata && (\n            <div>\n              <DisplayWeather data={passeddata} />\n            </div>\n          )}\n        </div>\n        <div>\n          { error && <h1>{error}</h1>}\n        </div>\n\n      </Form>\n    </div>\n  );\n}\n\nexport default WeatherData;"]},"metadata":{},"sourceType":"module"}